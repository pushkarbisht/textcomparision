<html>
<head></head>
<body>
<textarea id="original" style="width:100%;height:150px"></textarea>
<textarea id="modified" style="width:100%;height:150px"></textarea>
<button onclick="convert()">Click</button>
<div id="text" style="color:black">
</div>
</body>
</html>
<script>
function convert(){
	var text1 = document.getElementById('original').value.replace(/\n/g, '<br>\n');;
	var text2 = document.getElementById('modified').value.replace(/\n/g, '<br>\n');;



	var arr1 = [];
var arr2 = [];
var special_characters = [',','.','?','"',' '];
var current_special_char = '';
var single_word = '';
var start_fresh_word = false;

for(var i=0;i<text1.length;i++){	
		if(special_characters.includes(text1.charAt(i)) && current_special_char != text1.charAt(i)){
			start_fresh_word = true;
			current_special_char = text1.charAt(i);
		}
		else if(current_special_char  == text1.charAt(i)){
			start_fresh_word = false;
		}
		else if(current_special_char == text1.charAt(i)){
			start_fresh_word = false;
		}
		else if(special_characters.includes(text1.charAt(i))){
			start_fresh_word = true;
			current_special_char = text1.charAt(i);
		}
		else if(current_special_char != ''){
			start_fresh_word = true;
			current_special_char='';
		}
		else
			start_fresh_word = false;
  if(start_fresh_word){
	  if(single_word.length>0)
		arr1.push(single_word);
	single_word = text1.charAt(i);
  }
  else{
    single_word+=text1.charAt(i);
  }
}
if(single_word.length>0)
		arr1.push(single_word);
console.log(arr1);





 current_special_char = '';
 single_word = '';
 start_fresh_word = false;

for(var i=0;i<text2.length;i++){	
		if(special_characters.includes(text2.charAt(i)) && current_special_char != text2.charAt(i)){
			start_fresh_word = true;
			current_special_char = text2.charAt(i);
		}
		else if(current_special_char  == text2.charAt(i)){
			start_fresh_word = false;
		}
		else if(current_special_char == text2.charAt(i)){
			start_fresh_word = false;
		}
		else if(special_characters.includes(text2.charAt(i))){
			start_fresh_word = true;
			current_special_char = text2.charAt(i);
		}
		else if(current_special_char != ''){
			start_fresh_word = true;
			current_special_char='';
		}
		else
			start_fresh_word = false;
  if(start_fresh_word){
	  if(single_word.length>0)
		arr2.push(single_word);
	single_word = text2.charAt(i);
  }
  else{
    single_word+=text2.charAt(i);
  }
}
if(single_word.length>0)
		arr2.push(single_word);
console.log(arr2);





var final_string = '';
var pivot1 =0;
var pivot2 =0;
while(pivot1<arr1.length && pivot2<arr2.length){
	if(arr1[pivot1] == arr2[pivot2]){
		final_string+=arr1[pivot1];
		pivot1++;
		pivot2++;	
	}
	else{
		var word1;
		var word2;
		if(false){
		//if((arr1[pivot1].charAt(arr1[pivot1].length-1) == '.' || arr2[pivot2].charAt(arr2[pivot2].length-1) == '.')){
			/*	if(arr1[pivot1].charAt(arr1[pivot1].length-1) == '.'){
					if(arr1[pivot1].slice(0, -1) == arr2[pivot2]){
						final_string+=arr1[pivot1].slice(0, -1)+" ";
						pivot2++;
						var string_added = "";
						while(arr2[pivot2].charAt(arr2[pivot2].length-1) !='.'){
							string_added += arr2[pivot2]+" ";
							pivot2++;
						}
						string_added += arr2[pivot2].slice(0, -1);
						final_string += "<span style='color:green;'>"+string_added+"</span>"+"."+" ";
						pivot1++;
						pivot2++;						
					}
					else{
						final_string+="<strike style='color:red;'>"+arr1[pivot1].slice(0, -1)+"</strike>"+" ";
						var string_added = "";
						while(arr2[pivot2].charAt(arr2[pivot2].length-1) !='.'){
							string_added += arr2[pivot2]+" ";
							pivot2++;
						}
						string_added += arr2[pivot2].slice(0, -1);
						final_string += "<span style='color:green;'>"+string_added+"</span>"+"."+" ";
						pivot1++;
						pivot2++;
						
					}
				} 
				
				else if(arr2[pivot2].charAt(arr2[pivot2].length-1) == '.'){
					
					if(arr2[pivot2].slice(0, -1) == arr1[pivot1]){
						final_string+=arr2[pivot2].slice(0, -1)+" ";
						pivot1++;
						var string_deleted = "";
						while(arr1[pivot1].charAt(arr1[pivot1].length-1) !='.'){
							string_deleted += arr1[pivot1]+" ";
							pivot1++;
						}
						string_deleted += arr1[pivot1].slice(0, -1);
						final_string += "<strike style='color:red;'>"+string_deleted+"</strike>"+"."+" ";
						pivot1++;
						pivot2++;						
					}
					else{
						final_string+="<span style='color:green;'>"+arr2[pivot2].slice(0, -1)+"</span>"+" ";
						var string_deleted = "";
						while(arr1[pivot1].charAt(arr1[pivot1].length-1) !='.'){
							string_deleted += arr1[pivot1]+" ";
							pivot1++;
						}
						string_deleted += arr1[pivot1].slice(0, -1);
						final_string += "<strike style='color:red;'>"+string_deleted+"</span>"+"."+" ";
						pivot1++;
						pivot2++;
						
					}
				} */
		}
		
		else
		{
		var j = pivot2+1;
		var added_string = arr2[pivot2];
		var flag = false;
				while((arr2[j] != arr1[pivot1]))
				{
					if(arr2[j] == arr1[pivot1+1])
					{
						flag = true;
						break;
					}
					added_string+=arr2[j];
					j++;
						if(j>=arr2.length)
							break;
				}
					if(flag){
			final_string+="<pre style='background-color:red;'>"+arr1[pivot1]+"</pre><pre style='background-color:green;'>"+added_string+"</pre>";
			pivot1++;
			pivot2 = j;
					}
		else if(j<arr2.length){
			final_string+="<pre style='background-color:green;'>"+added_string+"</pre>"+arr1[pivot1];
			pivot1++;
			pivot2 = j+1;
		}	
	else{
			final_string+="<pre style='background-color:red;'>"+arr1[pivot1]+"</pre>";
			pivot1++;
	}	
	
	}
	
	
	}
}
if(pivot1 >=arr1.length){
			for(var k=pivot2;k<arr2.length;k++){
				final_string+="<pre style='background-color:green'>"+arr2[k]+"</pre>";
			}
			
		}
		else if(pivot2 >=arr2.length){
			for(var k=pivot1;k<arr1.length;k++){
				final_string+="<pre style='background-color:red'>"+arr2[k]+"</pre>";
			}
		}
document.getElementById('text').innerHTML = '<pre>'+final_string.trim()+'</pre>';
}
</script>
<style>
	pre{
		display: inline;
	}
</style>
